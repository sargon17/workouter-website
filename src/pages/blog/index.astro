---
import { getCollection } from 'astro:content';
import type { CollectionEntry } from 'astro:content';
import Layout from '../../layouts/Layout.astro';


// Load the content collection named "blog"
const posts = await getCollection('blog');

---

<Layout>
  <section class="max-w-screen-2xl mt-30 mx-auto p-4">
    <h1 class="text-4xl font-black lg:text-6xl mb-10">Blog Posts</h1>
    <ul class="list-none grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
      {posts.map((post: CollectionEntry<"blog">) => (
        <li>
          <a href={`/blog/${post.slug}`} class="block transition-all duration-300 hover:bg-surface-secondary p-4 rounded-lg border border-surface-secondary">
            <img src={post.data.image} alt={post.data.title} class="w-full h-auto rounded-lg my-4" />
            {post.data.title} – {new Date(post.data.pubDate).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })} • {Math.ceil(post.body.split(' ').length / 150)} min read
          <p>{post.data.description}</p>
          </a>
        </li>
      ))}
  </ul>
</section>
</Layout>
